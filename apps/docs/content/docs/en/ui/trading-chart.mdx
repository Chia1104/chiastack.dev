---
title: Trading Chart
description: Trading chart components built on top of lightweight-charts
---

Trading chart components built on top of `lightweight-charts`, providing complete trading chart functionality.

![TradingView](/tradingview-light.png)

## Installation

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">
    ```bash
    npm install @chiastack/ui lightweight-charts technicalindicators
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm add @chiastack/ui lightweight-charts technicalindicators
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn add @chiastack/ui lightweight-charts technicalindicators
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bun add @chiastack/ui lightweight-charts technicalindicators
    ```
  </Tab>
</Tabs>

## Components

### Chart

Chart container component for creating and initializing chart instances.

```tsx
import { Chart } from '@chiastack/ui/trading-chart/chart';
import { CandlestickSeries } from 'lightweight-charts';

function TradingChart() {
  const data = [
    { time: '2024-01-01', open: 100, high: 110, low: 95, close: 105 },
    { time: '2024-01-02', open: 105, high: 115, low: 100, close: 110 },
  ];

  return (
    <Chart
      layout={{ background: { color: '#ffffff' } }}
      onInit={(chart) => {
        console.log('Chart initialized:', chart);
      }}
    >
      {/* Series components go here */}
    </Chart>
  );
}
```

**Props:**
- `children`: React.ReactNode - Child components (usually Series components)
- `layout?: DeepPartial<ChartOptions["layout"]>` - Chart layout options
- `initOptions?: DeepPartial<ChartOptions>` - Chart initialization options
- `onInit?: (chart: IChartApi) => void` - Chart initialization callback

### Series

Data series component for adding various types of data series to the chart.

```tsx
import { Series } from '@chiastack/ui/trading-chart/series';
import { CandlestickSeries, LineSeries } from 'lightweight-charts';

function ChartWithSeries() {
  const candlestickData = [
    { time: '2024-01-01', open: 100, high: 110, low: 95, close: 105 },
    { time: '2024-01-02', open: 105, high: 115, low: 100, close: 110 },
  ];

  const lineData = [
    { time: '2024-01-01', value: 105 },
    { time: '2024-01-02', value: 110 },
  ];

  return (
    <Chart>
      <Series
        series={CandlestickSeries}
        data={candlestickData}
        options={{ upColor: '#26a69a', downColor: '#ef5350' }}
      />
      <Series
        series={LineSeries}
        data={lineData}
        options={{ color: '#2962FF', lineWidth: 2 }}
      />
    </Chart>
  );
}
```

**Props:**
- `data`: `SeriesDataItemTypeMap[TTime][T][]` - Data array
- `series`: `SeriesDefinition<T>` - Series type definition
- `options?: SeriesPartialOptionsMap[T]` - Series options
- `onInit?: (series: ISeriesApi<T>, chart: IChartApi | null) => void` - Series initialization callback
- `children?: React.ReactNode` - Child components

### MacdSeries

MACD (Moving Average Convergence Divergence) technical indicator series component.

```tsx
import { MacdSeries } from '@chiastack/ui/trading-chart/macd-series';

function ChartWithMacd() {
  const data = [
    { time: '2024-01-01', close: 100 },
    { time: '2024-01-02', close: 105 },
    { time: '2024-01-03', close: 110 },
  ];

  return (
    <Chart>
      <MacdSeries
        data={data}
        fastPeriod={12}
        slowPeriod={26}
        signalPeriod={9}
        paneIndex={1}
        macdLineOptions={{ color: '#2962FF', lineWidth: 2 }}
        signalLineOptions={{ color: '#FF6D00', lineWidth: 2 }}
        histogramOptions={{
          upColor: '#26a69a',
          downColor: '#ef5350',
        }}
      />
    </Chart>
  );
}
```

**Props:**
- `data`: `MacdData<TTime>[]` - Data array containing time and close price
- `fastPeriod?: number` - Fast period (default: 12)
- `slowPeriod?: number` - Slow period (default: 26)
- `signalPeriod?: number` - Signal period (default: 9)
- `paneIndex?: number` - Pane index (default: 1)
- `macdLineOptions?: { color?: string; lineWidth?: number }` - MACD line style options
- `signalLineOptions?: { color?: string; lineWidth?: number }` - Signal line style options
- `histogramOptions?: { upColor?: string; downColor?: string }` - Histogram style options

### RsiSeries

RSI (Relative Strength Index) technical indicator series component.

```tsx
import { RsiSeries } from '@chiastack/ui/trading-chart/rsi-series';

function ChartWithRsi() {
  const data = [
    { time: '2024-01-01', close: 100 },
    { time: '2024-01-02', close: 105 },
    { time: '2024-01-03', close: 110 },
  ];

  return (
    <Chart>
      <RsiSeries
        data={data}
        period={14}
        paneIndex={2}
        overboughtLevel={70}
        oversoldLevel={30}
        rsiLineOptions={{ color: '#9C27B0', lineWidth: 2 }}
        overboughtOptions={{ color: '#FF5722', lineWidth: 1 }}
        oversoldOptions={{ color: '#4CAF50', lineWidth: 1 }}
        showLevels={true}
      />
    </Chart>
  );
}
```

**Props:**
- `data`: `RsiData<TTime>[]` - Data array containing time and close price
- `period?: number` - RSI calculation period (default: 14)
- `paneIndex?: number` - Pane index (default: 2)
- `overboughtLevel?: number` - Overbought level (default: 70)
- `oversoldLevel?: number` - Oversold level (default: 30)
- `rsiLineOptions?: { color?: string; lineWidth?: number }` - RSI line style options
- `overboughtOptions?: { color?: string; lineWidth?: number }` - Overbought line style options
- `oversoldOptions?: { color?: string; lineWidth?: number }` - Oversold line style options
- `showLevels?: boolean` - Whether to show overbought/oversold level lines (default: true)

### SubscribeVisibleLogicalRange

Component for subscribing to chart visible logical range changes, useful for implementing data lazy loading.

```tsx
import { SubscribeVisibleLogicalRange } from '@chiastack/ui/trading-chart/subscrib-visible-logical-range';

function ChartWithRangeSubscription() {
  const handleRangeChange = React.useCallback((from: number) => {
    console.log('Visible range from:', from);
    // Load more data
  }, []);

  return (
    <Chart>
      <SubscribeVisibleLogicalRange
        method={handleRangeChange}
        enabled={true}
      />
    </Chart>
  );
}
```

**Props:**
- `method: (range: number) => void | Promise<void>` - Range change callback function
- `enabled?: boolean` - Whether to enable subscription (default: true)

## Context Hooks

### useChartContext

Get chart context for accessing chart API in child components.

```tsx
import { useChartContext } from '@chiastack/ui/trading-chart/chart.context';

function CustomComponent() {
  const chart = useChartContext('CustomComponent');
  const api = chart.api();
  
  // Use chart API
  api.timeScale().fitContent();
}
```

### useSeriesContext

Get series context for accessing series API in child components.

```tsx
import { useSeriesContext } from '@chiastack/ui/trading-chart/series.context';

function CustomSeriesComponent() {
  const series = useSeriesContext('CustomSeriesComponent');
  const api = series.api();
  
  // Use series API
  api.setMarkers([{ time: '2024-01-01', position: 'belowBar' }]);
}
```

## Complete Example

```tsx
import { Chart } from '@chiastack/ui/trading-chart/chart';
import { Series } from '@chiastack/ui/trading-chart/series';
import { MacdSeries } from '@chiastack/ui/trading-chart/macd-series';
import { RsiSeries } from '@chiastack/ui/trading-chart/rsi-series';
import { CandlestickSeries } from 'lightweight-charts';

function TradingView() {
  const candlestickData = [
    { time: '2024-01-01', open: 100, high: 110, low: 95, close: 105 },
    { time: '2024-01-02', open: 105, high: 115, low: 100, close: 110 },
  ];

  const macdData = [
    { time: '2024-01-01', close: 100 },
    { time: '2024-01-02', close: 105 },
  ];

  return (
    <Chart
      layout={{ background: { color: '#ffffff' } }}
      onInit={(chart) => console.log('Chart ready')}
    >
      <Series
        series={CandlestickSeries}
        data={candlestickData}
        options={{ upColor: '#26a69a', downColor: '#ef5350' }}
      />
      <MacdSeries data={macdData} />
      <RsiSeries data={macdData} />
    </Chart>
  );
}
```

